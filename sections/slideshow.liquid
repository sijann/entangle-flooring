{% liquid
  assign slide_duration = section.settings.slide_style
  assign slide_style = section.settings.slide_style

  assign image_height = section.settings.image_height
  if image_height == 'small'
  assign height_class = 'max-h-[300px]'
  elsif image_height == 'medium'
  assign height_class = 'max-h-[500px]'
  elsif image_height == 'large'
  assign height_class = 'max-h-[800px]'
  endif
%}


<div class="color-{{ section.settings.color_scheme }}">
  <slider-component>
    <div class="main-carousel">
      {% for block in section.blocks %}
        <div class="slide w-full relative {{ height_class }}">
          <div class="slide--image">
          {% liquid
            assign background_image = block.settings.background_image
            assign heading = block.settings.heading
            assign content = block.settings.content
            assign button_label = block.settings.button_label
            assign button_link = block.settings.button_link
            assign content_position = block.settings.content_position 
            assign alignment = block.settings.alignment
            assign container = block.settings.container

            assign alignment_mobile = block.settings.alignment_mobile
            assign container_mobile = block.settings.container_mobile


            if content_position == 'left'
            assign content_class = 'left-0'
            elsif content_position == 'center'
            assign content_class = 'left-1/2 -translate-x-1/2'
            elsif content_position == 'right'
            assign content_class = 'right-0'
            
            endif


            comment
            "text-left text-center text-right lg:text-left lg:text-center lg:text-right"
            endcomment

          %}
          {% if background_image != blank %}
            {{ background_image | image_url: width: background_image.width | image_tag: loading: 'lazy', class: "h-full w-full object-cover" }}
          {% else %}
            {{ 'hero-apparel-1' | placeholder_svg_tag }}
          {% endif %}
          </div>
        <div class="slide-content max-w-lg p-4 absolute z-[2] top-1/2 -translate-y-1/2 {{ content_class }} text-{{ alignment_mobile }} lg:text-{{ alignment }} {% if container %} color-{{ section.settings.color_scheme }} {% endif %}">
            {% if heading != blank %}
            <h2 class="text-4xl"> {{ heading }} </h2>
            {% endif %}
            {% if content != blank %}
            <p> {{ content }} </p>
            {% endif %}
            {% if button_label %}
              <a href="{{ button_link }}" class="button"> {{ button_label }} </a>
            {% endif %}
          </div>
          </div>
      {% else %}
        {% for i in (1..3) %}
          <div class=" w-full">
            {{ 'hero-apparel-1' | placeholder_svg_tag }}
          </div>
  
        {% endfor %}
        </div>
      {% endfor %}
  </slider-component>
</div>

{% schema %}
{
  "name": "Slideshow",
  "tag": "section",
  "settings": [
    {
      "type": "range",
      "id": "slide_duration",
      "min": 1,
      "max": 15,
      "default": 7,
      "step": 1,
      "label": "Slide duration"
    },
    {
      "type": "select",
      "id": "slide_style",
      "default": "fade",
      "label": "Slide style",
      "options": [
        {
          "value": "fade",
          "label": "Fade"
        },
        {
          "value": "slide",
          "label": "Slide"
        }
      ]
    },
    {
      "type": "select",
      "id": "image_height",
      "default": "medium",
      "label": "Image height",
      "options": [
        {
          "label": "Small",
          "value": "small"
        },
        {
          "label": "Medium",
          "value": "medium"
        },
        {
          "label": "Large",
          "value": "large"
        },
        {
          "label": "Adapt",
          "value": "adapt" 
        }
      ]
    },
    {
      "type": "color_scheme",
      "label": "Color Scheme",
      "id": "color_scheme",
      "default": "background-1"
    }
  ],
  "blocks": [
    {
      "name": "Slide",
      "type": "image",
      "settings": [
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Background Image"
        },
        {
          "type": "color",
          "id": "overlay_color",
          "label": "Overlay Color",
          "default": "#000000"
        },
        {
          "type": "range",
          "id": "overlay_opacity",
          "label": "Overlay Opacity",
          "min": 0,
          "max": 1,
          "step": 0.1,
          "default": 1
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "textarea",
          "id": "content",
          "label": "Text Content"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "color",
          "id": "button_bg_color",
          "label": "Button background olor",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "button_text_color",
          "label": "Button text color",
          "default": "#000000"
        },
        {
          "type": "select",
          "id": "content_position",
          "label": "Content Position",
          "options": [
            { "value": "top-left", "label": "Top Left" },
            { "value": "top-center", "label": "Top Center" },
            { "value": "top-right", "label": "Top Right" },
            { "value": "center-left", "label": "Center Left" },
            { "value": "center", "label": "Center" },
            { "value": "center-right", "label": "Center Right" },
            { "value": "bottom-left", "label": "Bottom Left" },
            { "value": "bottom-center", "label": "Bottom Center" },
            { "value": "bottom-right", "label": "Bottom Right" }
          ],
          "default": "center"
        },
        {
          "type": "select",
          "id": "alignment",
          "default": "center",
          "label": "Alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ]
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#FFFFFF"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Slideshow"
    }
  ]
}
{% endschema %}
