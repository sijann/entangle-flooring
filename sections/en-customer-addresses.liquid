<script src="{{ 'customer.js' | asset_url }}" defer></script>

{%- paginate customer.addresses by 5 -%}
  <div class="flex items-center justify-center  text-black">
    <div class="customer addresses w-full max-w-md p-8 rounded" data-customer-addresses>
      <svg style="display: none">
        <symbol id="icon-caret" viewBox="0 0 10 6">
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z"
                fill="currentColor">
        </symbol>
      </svg>
      <div class="">
        <h1 class="text-5xl font-bold mb-6 text-center">{{ 'customer.addresses.title' | t }}</h1>
        <div class=" flex items-center justify-center mt-3">
          <span class="mr-2">
            <a href="{{ routes.account_url }}">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="16"
                width="20"
                viewBox="0 0 448 512"
              >
                <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                <path
                    d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z" />
              </svg>
            </a>
          </span>
          <a href="{{ routes.account_url }}" class="text-xl   ">
            {{ 'customer.account.return' | t }}
          </a>
        </div>

        <div data-address>
          <collapsible-button target-id="addAddress">
            <div class="flex justify-center items-center ">
              <button
                type="button"
                aria-expanded="false"
                aria-controls="AddAddress"
                class="w-50 text-center text-black py-3 px-5 border-2 mt-4 font-bold "
              >
                <div class="text-gray-800">{{ 'customer.addresses.add_new' | t }}</div>
              </button>
            </div>
          </collapsible-button>

          <collapsible-content data-id="addAddress">
            <div class="collapsible-inner">
              <div id="AddAddress">
                <h2 class=" mt-8 text-xl" id="AddressNewHeading">{{ 'customer.addresses.add_new' | t }}</h2>
                {%- form 'customer_address', customer.new_address, aria-labelledBy: 'AddressNewHeading' -%}
                  <div class="mt-4">
                    <label for="AddressFirstNameNew" class="block mb-2 ">
                      {{- 'customer.addresses.first_name' | t -}}
                    </label>
                    <input
                      type="text"
                      id="AddressFirstNameNew"
                      name="address[first_name]"
                      value="{{ form.first_name }}"
                      autocomplete="given-name"
                      class="w-full p-2 mb-4 border-2 border-gray-300"
                      required
                    >
                    <label for="AddressLastNameNew" class="block mb-2 ">
                      {{- 'customer.addresses.last_name' | t -}}
                    </label>
                    <input
                      type="text"
                      id="AddressLastNameNew"
                      name="address[last_name]"
                      value="{{ form.last_name }}"
                      autocomplete="family-name"
                      class="w-full p-2 mb-4 border-2 border-gray-300"
                    >
                    <label for="AddressCompanyNew" class="block mb-2 ">
                      {{- 'customer.addresses.company' | t -}}
                    </label>
                    <input
                      type="text"
                      id="AddressCompanyNew"
                      name="address[company]"
                      value="{{ form.company }}"
                      autocomplete="organization"
                      class="w-full p-2 mb-4 border-2 border-gray-300"
                    >
                    <label for="AddressAddress1New" class="block mb-2 ">
                      {{- 'customer.addresses.address1' | t -}}
                    </label>
                    <input
                      type="text"
                      id="AddressAddress1New"
                      name="address[address1]"
                      value="{{ form.address1 }}"
                      autocomplete="address-line1"
                      class="w-full p-2 mb-4 border-2 border-gray-300"
                    >
                    <label for="AddressAddress2New" class="block mb-2 ">
                      {{- 'customer.addresses.address2' | t -}}
                    </label>
                    <input
                      type="text"
                      id="AddressAddress2New"
                      name="address[address2]"
                      value="{{ form.address2 }}"
                      autocomplete="address-line2"
                      class="w-full p-2 mb-4 border-2 border-gray-300"
                    >
                    <label for="AddressCityNew" class="block mb-2 ">{{ 'customer.addresses.city' | t }}</label>
                    <input
                      type="text"
                      id="AddressCityNew"
                      name="address[city]"
                      value="{{ form.city }}"
                      autocomplete="address-level2"
                      class="w-full p-2 mb-4 border-2 border-gray-300"
                    >
                    <label for="AddressCountryNew" class="block mb-2 ">
                      {{- 'customer.addresses.country' | t -}}
                    </label>
                    <div>
                      <select
                        id="AddressCountryNew"
                        name="address[country]"
                        data-default="{{ form.country }}"
                        autocomplete="country"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >
                        {{ all_country_option_tags }}
                      </select>
                    </div>
                    <div id="AddressProvinceContainerNew" style="display: none">
                      <label for="AddressProvinceNew" class="block mb-2 ">
                        {{- 'customer.addresses.province' | t -}}
                      </label>
                      <div class="select">
                        <select
                          id="AddressProvinceNew"
                          name="address[province]"
                          data-default="{{ form.province }}"
                          autocomplete="address-level1"
                          class="w-full p-2 mb-4 border-2 border-gray-300"
                        ></select>
                      </div>
                    </div>
                    <label for="AddressZipNew" class="block mb-2 ">{{ 'customer.addresses.zip' | t }}</label>
                    <input
                      type="text"
                      id="AddressZipNew"
                      name="address[zip]"
                      value="{{ form.zip }}"
                      autocapitalize="characters"
                      autocomplete="postal-code"
                      class="w-full p-2 mb-4 border-2 border-gray-300"
                    >
                    <label for="AddressPhoneNew" class="block mb-2 ">
                      {{- 'customer.addresses.phone' | t -}}
                    </label>
                    <input
                      type="tel"
                      id="AddressPhoneNew"
                      name="address[phone]"
                      value="{{ form.phone }}"
                      autocomplete="tel"
                      class="w-full p-2 mb-4 border-2 border-gray-300"
                    >
                    <div>
                      {{ form.set_as_default_checkbox }}
                      <label for="address_default_address_new" class=" mb-2 ">
                        {{- 'customer.addresses.set_default' | t -}}
                      </label>
                    </div>

                    <div class="mt-5">
                      <button class="w-full text-white bg-black py-3 px-5 ">
                        {{ 'customer.addresses.add' | t }}
                      </button>
                      <div class="text-center my-4 flex items-center">
                        <div class="flex-1 border-t border-gray-400"></div>
                        <span class="mx-4 text-black ">or</span>
                        <div class="flex-1 border-t border-gray-400"></div>
                      </div>
                      <button type="reset" class="w-full text-black py-3 px-5 border-2  ">
                        {{ 'customer.addresses.cancel' | t }}
                      </button>
                    </div>
                  </div>
                {% endform %}
              </div>
            </div>
          </collapsible-content>
        </div>
        <ul role="list">
          {%- for address in customer.addresses -%}
            <li data-address>
              <div class=" border border-gray-300 mt-5 p-4 ">
                <div class="flex items-center justify-center">
                  <div>
                    {%- if address == customer.default_address -%}
                      <h2 class=" mb-3 text-xl">{{ 'customer.addresses.default' | t }}</h2>
                    {%- endif -%}
                    {{ address | format_address }}
                  </div>
                </div>

                <div class="mt-4 flex items-center justify-center space-x-6 ">
                  <collapsible-button target-id="address-{{ forloop.index }}">
                    <button
                      type="button"
                      id="EditFormButton_{{ address.id }}"
                      aria-label="{{ 'customer.addresses.edit_address' | t }} {{ forloop.index }}"
                      aria-controls="EditAddress_{{ address.id }}"
                      aria-expanded="false"
                      data-address-id="{{ address.id }}"
                      class="inline-flex items-center "
                    >
                      {{ 'customer.addresses.edit' | t }}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        height="16"
                        width="16"
                        class="ml-3"
                        viewBox="0 0 512 512"
                      >
                        <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                        <path
                            d="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z" />
                      </svg>
                    </button>
                  </collapsible-button>

                  <button
                    type="button"
                    aria-label="{{ 'customer.addresses.delete' | t }} {{ forloop.index }}"
                    data-target="{{ address.url }}"
                    data-confirm-message="{{ 'customer.addresses.delete_confirm' | t }}"
                    class="inline-flex items-center "
                  >
                    {{ 'customer.addresses.delete' | t }}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      height="16"
                      width="12"
                      class="ml-3"
                      viewBox="0 0 384 512"
                    >
                      <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                      <path
                          d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z" />
                    </svg>
                  </button>
                </div>
              </div>

              <collapsible-content data-id="address-{{ forloop.index }}" class="absolute right-0 top-0">
                <div class="collapsible-inner">
                  <div id="EditAddress_{{ address.id }}">
                    <h2 class=" mt-8 text-xl mb-3">{{ 'customer.addresses.edit_address' | t }}</h2>
                    {%- form 'customer_address', address -%}
                      <label for="AddressFirstName_{{ form.id }}" class="block mb-2 ">
                        {{- 'customer.addresses.first_name' | t -}}
                      </label>
                      <input
                        type="text"
                        id="AddressFirstName_{{ form.id }}"
                        name="address[first_name]"
                        value="{{ form.first_name }}"
                        autocomplete="given-name"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >

                      <label for="AddressLastName_{{ form.id }}" class="block mb-2 ">
                        {{- 'customer.addresses.last_name' | t -}}
                      </label>

                      <input
                        type="text"
                        id="AddressLastName_{{ form.id }}"
                        name="address[last_name]"
                        value="{{ form.last_name }}"
                        autocomplete="family-name"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >

                      <label for="AddressCompany_{{ form.id }}" class="block mb-2 ">
                        {{- 'customer.addresses.company' | t -}}
                      </label>
                      <input
                        type="text"
                        id="AddressCompany_{{ form.id }}"
                        name="address[company]"
                        value="{{ form.company }}"
                        autocomplete="organization"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >

                      <label for="AddressAddress1_{{ form.id }}" class="block mb-2 ">
                        {{- 'customer.addresses.address1' | t -}}
                      </label>

                      <input
                        type="text"
                        id="AddressAddress1_{{ form.id }}"
                        name="address[address1]"
                        value="{{ form.address1 }}"
                        autocomplete="address-line1"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >

                      <label for="AddressAddress2_{{ form.id }}" class="block mb-2 ">
                        {{- 'customer.addresses.address2' | t -}}
                      </label>

                      <input
                        type="text"
                        id="AddressAddress2_{{ form.id }}"
                        name="address[address2]"
                        value="{{ form.address2 }}"
                        autocomplete="address-line2"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >

                      <label for="AddressCity_{{ form.id }}" class="block mb-2 ">
                        {{- 'customer.addresses.city' | t -}}
                      </label>
                      <input
                        type="text"
                        id="AddressCity_{{ form.id }}"
                        name="address[city]"
                        value="{{ form.city }}"
                        autocomplete="address-level2"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >

                      <div>
                        <label for="AddressCountry_{{ form.id }}" class="block mb-2 ">
                          {{ 'customer.addresses.country' | t }}
                        </label>
                        <div>
                          <select
                            id="AddressCountry_{{ form.id }}"
                            name="address[country]"
                            data-address-country-select
                            data-default="{{ form.country }}"
                            data-form-id="{{ form.id }}"
                            autocomplete="country"
                            class="w-full p-2 mb-4 border-2 border-gray-300"
                          >
                            {{ all_country_option_tags }}
                          </select>
                        </div>
                      </div>
                      <div id="AddressProvinceContainer_{{ form.id }}" style="display:none;">
                        <label for="AddressProvince_{{ form.id }}">
                          {{ 'customer.addresses.province' | t }}
                        </label>
                        <div>
                          <select
                            id="AddressProvince_{{ form.id }}"
                            name="address[province]"
                            data-default="{{ form.province }}"
                            autocomplete="address-level1"
                            class="w-full p-2 mb-4 border-2 border-gray-300"
                          ></select>
                        </div>
                      </div>
                      <label for="AddressZip_{{ form.id }}" class="block mb-2 ">
                        {{- 'customer.addresses.zip' | t -}}
                      </label>

                      <input
                        type="text"
                        id="AddressZip_{{ form.id }}"
                        name="address[zip]"
                        value="{{ form.zip }}"
                        autocapitalize="characters"
                        autocomplete="postal-code"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >

                      <label for="AddressPhone_{{ form.id }}" class="block mb-2 ">
                        {{- 'customer.addresses.phone' | t -}}
                      </label>
                      <input
                        type="tel"
                        id="AddressPhone_{{ form.id }}"
                        name="address[phone]"
                        value="{{ form.phone }}"
                        autocomplete="tel"
                        class="w-full p-2 mb-4 border-2 border-gray-300"
                      >

                      <div>
                        {{ form.set_as_default_checkbox }}
                        <label for="address_default_address_{{ form.id }}">
                          {{ 'customer.addresses.set_default' | t }}
                        </label>
                      </div>
                      <div class="mt-5">
                        <button class="w-full text-white bg-black py-3 px-5 ">
                          {{ 'customer.addresses.update' | t }}
                        </button>
                        <div class="text-center my-4 flex items-center">
                          <div class="flex-1 border-t border-gray-400"></div>
                          <span class="mx-4 text-black ">or</span>
                          <div class="flex-1 border-t border-gray-400"></div>
                        </div>
                        <button type="reset" class="w-full text-black py-3 px-5 border-2  ">
                          {{ 'customer.addresses.cancel' | t }}
                        </button>
                      </div>
                    {%- endform -%}
                  </div>
                </div>
              </collapsible-content>
            </li>
          {%- endfor -%}
        </ul>

        {%- if paginate.pages > 1 -%}
          {%- if paginate.parts.size > 0 -%}
            <nav class="pagination" role="navigation" aria-label="{{ 'general.pagination.label' | t }}">
              <ul role="list">
                {%- if paginate.previous -%}
                  <li>
                    <a href="{{ paginate.previous.url }}" aria-label="{{ 'general.pagination.previous' | t }}">
                      <svg aria-hidden="true" focusable="false" viewBox="0 0 10 6">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                      </svg>
                    </a>
                  </li>
                {%- endif -%}

                {%- for part in paginate.parts -%}
                  <li>
                    {%- if part.is_link -%}
                      <a href="{{ part.url }}" aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                        {{- part.title -}}
                      </a>
                    {%- else -%}
                      {%- if part.title == paginate.current_page -%}
                        <span aria-current="page" aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                          {{- part.title -}}
                        </span>
                      {%- else -%}
                        <span>{{ part.title }}</span>
                      {%- endif -%}
                    {%- endif -%}
                  </li>
                {%- endfor -%}

                {%- if paginate.next -%}
                  <li>
                    <a href="{{ paginate.next.url }}" aria-label="{{ 'general.pagination.next' | t }}">
                      <svg aria-hidden="true" focusable="false" viewBox="0 0 10 6">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                      </svg>
                    </a>
                  </li>
                {%- endif -%}
              </ul>
            </nav>
          {%- endif -%}
        {%- endif -%}
      </div>
    </div>
  </div>
  <script>
    window.addEventListener('load', () => {
      typeof CustomerAddresses !== 'undefined' && new CustomerAddresses();
    });
  </script>
{%- endpaginate -%}
